@model i04.Web.Models.Home.ChartsDataViewModel


@{
    ViewBag.Title = "Buble Sort";
}

<script src="~/Scripts/io4.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
<script type="text/javascript">

    function UpdateChart2(data) {
        var ctx = document.getElementById("bar-chart2").getContext('2d');
        var myChart = new Chart(ctx,
            {
                type: 'bar',
                data: {
                    labels: data,
                    datasets: [
                        {
                            label: 'Sorting',
                            data: data,
                            backgroundColor: '#3fdbcb'
                        }
                    ]
                },
                options: {
                    animation: false
                }
            });
    }
</script>
@section scripts{

    <script src="@Url.Content("~/Scripts/jquery.signalR-2.2.2.min.js")"></script>
    <script src="@Url.Content("~/signalr/hubs")"></script>
    <script>
        (function () {
            var algoHub = $.connection.algoHub;
            $.connection.hub.start()
                .done(function () {
                    console.log("connected");
                    algoHub.server.getId().done(function (id) {
                        console.log("ID" + id);
                        $('#ConId').val(id);
                    }).fail(function (e) { console.log("Failed" + e) });
                });
            algoHub.client.updateChart2 = function (data) {
                console.log("chart2");
                UpdateChart2(data);
            }
        })()
    </script>
}
<div class="container col-lg-12 col-sm-12 col-md-12">
    <h2>
        Sorting using "Bubble Sort"
    </h2>
    <hr />
    <script src="~/Scripts/jquery-3.2.1.js"></script>
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>

    <div>
        @using (Html.BeginForm("Charts", "Charts", FormMethod.Post))
        {
            @Html.LabelFor(m => Model.Amount, "Enter the ammount of random numbers (0-40) ");
            @Html.TextBoxFor(m => Model.Amount, new { @id = "amount", @class = "text-b" });
            @Html.HiddenFor(m => m.ConId, new { @id = "ConId" });
            <input type="submit" value="Enter" />
        }

    </div>
    <script type="text/javascript">
        function getTextBoxContent() {
            return document.getElementById('ConId').value;
        }
    </script>
    <hr />

    <div style="float: left" class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
        <canvas id="bar-chart1"></canvas>
    </div>
    <script>
            new Chart(document.getElementById("bar-chart1"),
                {
                    type: 'bar',
                    data: {
                        labels: [@(Model.Numbers.Length > 0 ? string.Join(",", Model.Numbers[0]):"")],
                        datasets: [
                            {
                                label: "First number:"+@(Model.Numbers.Length > 0&&Model.Numbers[0].Length>0 ? Model.Numbers[0][0]:1) ,
                                backgroundColor: getColors(@(Model.Numbers.Length > 0 ?Model.Numbers[0].Length:0)).split(','),
                                data: [@(Model.Numbers.Length > 0?  string.Join(",", Model.Numbers[0]):"")]
                            }
                        ]
                    },
                    options: {
                       
                        legend: { display: true },
                        title: {
                            display: true,
                            text: ['Result for:' + @Model.Amount + ' random numbers ' + '|' +' @ViewBag.ExecutionTime'],

                        }
                    }
                });
    </script>

    <div style="float: left" class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">
        <canvas id="bar-chart2"></canvas>
    </div>
    <script>
                new Chart(document.getElementById("bar-chart2"),
                    {
                        type: 'bar',
                        data: {
                            labels: [@(Model.Numbers.Length > 0?  string.Join(",", Model.Numbers[1]) :"")],
                            datasets: [
                                {
                                   label: "First number:"+@(Model.Numbers.Length > 0 && Model.Numbers[1].Length > 0 ? Model.Numbers[1][0]:0) ,
                                   @*backgroundColor: getColors(@Model.Numbers[1].Length).split(','),*@
                                   backgroundColor:  "#3fdbcb",

                                    data: [@(Model.Numbers.Length > 0?  string.Join(",", Model.Numbers[1]):"")]
                                }
                            ]
                        },
                        options: {

                            legend: { display: true },
                            title: {
                                display: true,
                                text: ['Result for:' + @Model.Amount + ' random numbers ' + '|' +' @ViewBag.ExecutionTime'],

                            }
                        }
                    });
    </script>
    <br />
</div>
